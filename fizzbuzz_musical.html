<html>
<!-- link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css" -->
<style>
  p {
    margin: 0px auto 0px auto;
  }
  input {
    margin-bottom:2px;
  }
  #entry {
    margin-bottom:10px;
  }
</style>
<body>
<h1>FizzBuzz - The Musical</h1>

<form>
  <p id = "entry">
    Enter Minimum number: <input type="text" id="min" /><br />
    Enter Maximum number: <input type="text" id="max" /><br />
  </p>
  <input type="button" name="fizzbuzz_button" value="Run FizzBuzzer" onclick="input_output_html()" />
  <input type="button" name="reset_button" value="Reset Input" onclick="reset()" />
  <input type="button" name="clear_button" value="Clear Log" onclick="clear_log()" />
</form>

<div id="result_placeholder"></div>
<div id="clear_placeholder"></div>


<script>

var buzz = new Audio('buzz.mp3');
var fizz = new Audio('fizz.mp3');
var beat0 = new Audio('0.wav');
var beat1 = new Audio('1.wav');

function fb(i, counter, min, max) {

  var pause = 0;
  console.log(min+counter);
  for (var j = min; j < (min + counter); j++) {
    if (j == min) {
      pause = 0;
    }
    else if ((j-1) % 15 == 0) {
      pause += 1800;
    }
    else if ((j-1) % 5 == 0) {
      pause += 1800;
    }
    else if ((j-1) % 3 == 0) {
      pause += 1200;
    }
    else {
      pause += 400;
    }
  }
  console.log(pause);

  setTimeout(function(){
    var output = "";
    if (i%15 == 0) {
      output += "Fizzbuzz";
      fizz.play();
      buzz.play();
    }
    else if (i%5 == 0) {
      output += "Buzz";
      buzz.play();
    }
    else if (i%3 == 0) {
      output += "Fizz";
      fizz.play();
    }
    else {
      output += i;
      beat0.play();
    }
    //output += "<br />";
    var p = document.createElement("P");
    var textnode = document.createTextNode(output);
    //document.getElementById("result_placeholder").innerHTML = 
    p.appendChild(textnode);
    document.getElementById("result_placeholder").appendChild(p);
  }, pause, i);
}

function fizzbuzz(min, max) {
  var output = "";
  if (min == '' || max == '') {
    alert("One or both inputs are empty. Try again.");
  }
  else if (isNaN(min) || isNaN(max)) {
    alert("One or both inputs are not numbers. Try again.");
  }
  else if (parseInt(min) > parseInt(max)) {
    alert("Maximum number should be greater than minimum number. Try reversing values?");
  }
  else {
    var counter = 0;  //c = counter
    for (var i = parseInt(min); i <= parseInt(max); i++) {
      min = parseInt(min);
      max = parseInt(max);
      counter++;
      fb(i, counter, min, max);
    }
  }
  
}

function reset() {
  document.getElementById("min").value = "";
  document.getElementById("max").value = "";
}

function clear_log() {
  document.getElementById("result_placeholder").innerHTML = "";
  document.getElementById("clear_placeholder").innerHTML = "";
}

function input_output_html() {
  var min = document.getElementById("min").value;
  var max = document.getElementById("max").value;
  fizzbuzz(min, max);
  // document.getElementById("clear_placeholder").innerHTML = '<input type="button" name="clear_button" value="Clear Log" onclick="clear_log()" />'
}

</script>

</body>
</html>